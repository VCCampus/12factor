# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Development Commands

### Core Development
- `npm run dev` - Start development server at http://localhost:3000
- `npm run build` - Build production bundle
- `npm run start` - Start production server
- `npm run lint` - Run ESLint for code quality checks

### TypeScript and Linting
The project uses TypeScript with strict mode enabled. Run `npm run lint` after making changes to ensure code quality.

### Environment Variables

Create a `.env.local` file in the project root with the following variables:


## Project State & Directory Structure


### Main Dependencies

#### Vue Project (Primary)
- **Framework**: Vue 3.4.0, Vue Router 4.0.13
- **Build Tool**: Vite 4.0.0
- **State Management**: Pinia 2.0.32
- **UI Components**: @headlessui/vue, lucide-vue-next
- **Testing**: Playwright 1.55.0, @vue/test-utils 2.4.6
- **PWA**: vite-plugin-pwa 0.16.4


### Project Directory Structure
```
/opt/src/12factor/
├── vue/                   # PRIMARY DEVELOPMENT - CSS Digital Entrepreneurship
│   ├── src/              # Vue source code
│   │   ├── components/   # Vue components
│   │   ├── router/       # Vue Router configuration
│   │   ├── stores/       # Pinia state stores
│   │   ├── views/        # Page components
│   │   └── utils/        # Utility functions
│   ├── public/           # Static assets and JSON data
│   │   └── w3sc8_*.json  # Generated JSON from TOML
│   ├── tests/            # Playwright e2e tests
│   └── package.json      # Vue project config
├── dist/                  # Production build output (from Vue)
├── docs/                  # Documentation and planning
│   ├── plans/            # Task analysis and planning
│   │   └── web3scv8_v4.toml # Main TOML configuration
│   ├── reports/          # Research reports and deliverables
│   └── research/         # External reference materials
├── scripts/              # Build and utility scripts (cleaned)
│   ├── build.sh          # Main build script
│   ├── toml-to-json.js   # TOML to JSON converter
│   ├── validate-config.js # TOML validator
│   └── generate-changelog.js # Change tracker
├── logs/                 # Build and test logs

```

## Development Guidelines & Rules

### Project Architecture Decision (2025-08-28)

#### Core Decisions
1. **All new features belong to Vue project** - The Vue application at `/vue` is the primary development platform
2. **Projects remain isolated** - Vue and Next.js projects maintain complete independence  
3. **Vue is the sole development entry point** - All future development uses `/vue` as the source code base

#### Build Output Strategy
- **Vue project**: Builds to `/dist` directory (primary website output)
- **Next.js project**: Builds to `/public` (legacy, not triggered in normal builds)
- **Build script**: `./scripts/build.sh` handles Vue project build and deployment to `/dist`

### Script and Documentation Output Rules

#### 1. Script Output Location
All utility, testing, data processing, and temporary scripts must be output to:
```
/opt/src/12factor/scripts/
```
- Test scripts
- Build helpers
- Data migration tools
- Temporary automation scripts
- Maintenance utilities

#### 2. Documentation Output Locations
All planning, research, and discussion documents must be organized in:
```
/opt/src/12factor/docs/
├── plans/       # Task analysis and implementation plans
├── reports/     # Research outcomes, deliverables, findings
└── research/    # External references and gathered materials
```

#### 3. Directory Conventions
- `/vue` - **Primary source code entry point** (all new development happens here)
- `/dist` - **Vue build output** (website deployment, auto-generated by build.sh)
- `/docs` - Documentation (managed)
- `/scripts` - Utility scripts (managed)
- `/logs` - Development and test logs
- `/src` - Legacy Next.js source (read-only, do not modify)
- All other existing project directories are considered legacy/protected

**Important**: If modifications to protected directories are necessary, always:
1. Request explicit permission first
2. Create new files rather than modifying existing ones
3. Document the reason for changes

### Code Modification Guidelines
1. **Prefer editing over creating**: Always edit existing files rather than creating new ones
2. **No unsolicited documentation**: Never create *.md or README files unless explicitly requested
3. **Respect existing patterns**: Follow the codebase's established conventions
4. **Bilingual support required**: All user-facing content must support both English and Chinese
5. **Dark mode compliance**: All UI components must support dark mode with Tailwind's `dark:` prefix

### Git Workflow
- Main branch: `main`
- Keep commits focused and atomic
- Never commit without explicit user request
- Run `npm run lint` before committing code changes

### Testing Requirements
- Run `npm run lint` after code changes
- Verify TypeScript compilation with `npm run build`
- Test both English and Chinese locales
- Verify dark mode functionality