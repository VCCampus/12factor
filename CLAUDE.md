# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Development Commands

### Core Development
- `cd vue && npm run dev` - Start development server at http://localhost:5173
- `cd vue && npm run build` - Build production bundle to /dist
- `./scripts/build.sh` - Full TOMLâ†’JSONâ†’Vue build pipeline
- `cd vue && npm run lint` - Run ESLint for code quality checks
- `cd vue && npm run type-check` - TypeScript compilation check

### TypeScript and Linting
The project uses TypeScript with strict mode enabled. Run `npm run lint` after making changes to ensure code quality.

### Environment Variables

Create a `.env.local` file in the project root with the following variables:


## Project State & Directory Structure


### Main Dependencies

#### Vue Project (Primary)
- **Framework**: Vue 3.4.0, Vue Router 4.2.5
- **Build Tool**: Vite 5.0.10
- **State Management**: Pinia 2.1.7
- **Styling**: Tailwind CSS 3.4.0, Neobrutalism design system
- **TypeScript**: 5.3.0 with strict mode
- **Testing**: Playwright 1.55.0 with E2E automation
- **PDF Export**: jsPDF 3.0.2
- **Build Output**: /dist directory (via Vite build)


### Project Directory Structure
```
/opt/src/12factor/
â”œâ”€â”€ vue/                   # PRIMARY DEVELOPMENT - CSS Digital Entrepreneurship
â”‚   â”œâ”€â”€ src/              # Vue source code
â”‚   â”‚   â”œâ”€â”€ components/   # Vue components
â”‚   â”‚   â”œâ”€â”€ router/       # Vue Router configuration
â”‚   â”‚   â”œâ”€â”€ stores/       # Pinia state stores
â”‚   â”‚   â”œâ”€â”€ views/        # Page components
â”‚   â”‚   â””â”€â”€ utils/        # Utility functions
â”‚   â”œâ”€â”€ public/           # Static assets and JSON data
â”‚   â”‚   â””â”€â”€ w3sc8_*.json  # Generated JSON from TOML
â”‚   â”œâ”€â”€ tests/            # Playwright e2e tests
â”‚   â””â”€â”€ package.json      # Vue project config
â”œâ”€â”€ dist/                  # Production build output (from Vue)
â”œâ”€â”€ docs/                  # Documentation and planning
â”‚   â”œâ”€â”€ plans/            # Task analysis and planning
â”‚   â”‚   â””â”€â”€ web3scv8_v4.toml # Main TOML configuration
â”‚   â”œâ”€â”€ reports/          # Research reports and deliverables
â”‚   â””â”€â”€ research/         # External reference materials
â”œâ”€â”€ scripts/              # Build and utility scripts (cleaned)
â”‚   â”œâ”€â”€ build.sh          # Main build script
â”‚   â”œâ”€â”€ toml-to-json.js   # TOML to JSON converter
â”‚   â”œâ”€â”€ validate-config.js # TOML validator
â”‚   â””â”€â”€ generate-changelog.js # Change tracker
â”œâ”€â”€ logs/                 # Build and test logs

```

## Development Guidelines & Rules

### Project Architecture Decision (2025-08-28)

#### Core Decisions
1. **All new features belong to Vue project** - The Vue application at `/vue` is the primary development platform
2. **Projects remain isolated** - Vue and Next.js projects maintain complete independence  
3. **Vue is the sole development entry point** - All future development uses `/vue` as the source code base

#### Build Output Strategy
- **Vue project**: Builds to `/dist` directory (primary website output)
- **Next.js project**: Builds to `/public` (legacy, not triggered in normal builds)
- **Build script**: `./scripts/build.sh` handles Vue project build and deployment to `/dist`

### Script and Documentation Output Rules

#### 1. Script Output Location
All utility, testing, data processing, and temporary scripts must be output to:
```
/opt/src/12factor/scripts/
```
- Test scripts
- Build helpers
- Data migration tools
- Temporary automation scripts
- Maintenance utilities

#### 2. Documentation Output Locations
All planning, research, and discussion documents must be organized in:
```
/opt/src/12factor/docs/
â”œâ”€â”€ plans/       # Task analysis and implementation plans
â”œâ”€â”€ reports/     # Research outcomes, deliverables, findings
â””â”€â”€ research/    # External references and gathered materials
```

#### 3. Directory Conventions
- `/vue` - **Primary source code entry point** (all new development happens here)
- `/dist` - **Vue build output** (website deployment, auto-generated by build.sh)
- `/docs` - Documentation (managed)
- `/scripts` - Utility scripts (managed)
- `/logs` - Development and test logs
- `/src` - Legacy Next.js source (read-only, do not modify)
- All other existing project directories are considered legacy/protected

**Important**: If modifications to protected directories are necessary, always:
1. Request explicit permission first
2. Create new files rather than modifying existing ones
3. Document the reason for changes

### Code Modification Guidelines
1. **Prefer editing over creating**: Always edit existing files rather than creating new ones
2. **No unsolicited documentation**: Never create *.md or README files unless explicitly requested
3. **Respect existing patterns**: Follow the codebase's established conventions
4. **Bilingual support required**: All user-facing content must support both English and Chinese
5. **Dark mode compliance**: All UI components must support dark mode with Tailwind's `dark:` prefix

### Git Workflow
- Main branch: `main`
- Keep commits focused and atomic
- Never commit without explicit user request
- Run `npm run lint` before committing code changes

### Testing Requirements
- Run `cd vue && npm run lint` after code changes
- Verify TypeScript compilation with `cd vue && npm run type-check`
- Test with `cd vue && npm run build` to ensure production readiness
- Run E2E tests with Playwright: baseURL configured for http://web3mh.101.so:11181/
- Test Chinese locale support (primary language)
- Verify neobrutalism design system consistency

## Current Project Status (2025-09-05) - Post Navigation Simplification

### ğŸ‰ Recent Major Update (Issue #17)
**å¯¼èˆªæ ç®€åŒ–é¡¹ç›®å·²å®Œæˆ** - å°†åŸæœ‰9é¡¹å¯¼èˆªç²¾ç®€ä¸º4é¡¹ï¼Œæ˜¾è‘—æ”¹å–„ç”¨æˆ·ä½“éªŒã€‚

#### Navigation Structure Changes
```
æ—§å¯¼èˆªï¼šé¦–é¡µ | æ¸©åº¦è®¡ | åŸåˆ™ | é—ªå¡ | æµ‹è¯• | æ¨¡æ‹Ÿé¢è¯• | åˆ†æ | æˆå°± | å¯¼å‡º
æ–°å¯¼èˆªï¼šé¦–é¡µ | æ¸©åº¦è®¡ | åŸåˆ™ | æ¨¡æ‹Ÿé¢è¯•

åŸåˆ™é¡µé¢æ–°å¢Tabå¯¼èˆªï¼š
ğŸ“š åŸåˆ™å­¦ä¹  | ğŸ¯ é—ªå¡ç»ƒä¹  | ğŸ† æŒ‘æˆ˜æµ‹è¯•
```

#### Key Architecture Changes
- **Nested Routing**: `/principles/{study|flashcards|quiz}`
- **Component Restructure**: New `/components/principles/` directory
- **Data Management**: Moved to footer with localStorage storage
- **File Archive**: Old files moved to `/disused/` directory

### Active Features
- **Home Dashboard**: CSSæ•°åˆ›ç­8æœŸæ ¸å¿ƒçŸ¥è¯†ä½“ç³»å­¦ä¹ å¹³å°
- **Knowledge Principles**: Integrated Tab-based learning center
  - ğŸ“š **åŸåˆ™å­¦ä¹ **: 20 principles across 5 stages from TOML config
  - ğŸ¯ **é—ªå¡ç»ƒä¹ **: Interactive learning cards with spaced repetition
  - ğŸ† **æŒ‘æˆ˜æµ‹è¯•**: Multi-mode quiz system (practice/exam/review)
- **Mock Interviews**: 4-difficulty interview system (basic/intermediate/advanced/expert)
- **Thermometer View**: Market sentiment navigation component

### Technical Architecture
- **Data Pipeline**: TOML configuration â†’ JSON generation â†’ Vue consumption
- **State Management**: 4 Pinia stores (config, quiz, interview, progress)
- **Routing**: 4 main routes with nested principles subroutes
- **Styling**: Tailwind CSS with custom neobrutalism theme
- **Build Process**: Automated via scripts/build.sh with validation pipeline
- **Data Storage**: localStorage with 5MB limit and automatic cleanup

### Directory Structure Updates
```
/opt/src/12factor/
â”œâ”€â”€ vue/                           # PRIMARY DEVELOPMENT
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ principles/        # ğŸ†• Tab-based navigation components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PrinciplesTab.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudyContent.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FlashcardsContent.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ QuizContent.vue
â”‚   â”‚   â”‚   â””â”€â”€ layout/            # Updated footer with data management
â”‚   â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚   â”‚       â””â”€â”€ dataManager.ts # ğŸ†• Data export and storage management
â”‚   â”‚   â””â”€â”€ views/                 # Simplified view structure
â”œâ”€â”€ disused/                       # ğŸ†• Archived components from navigation simplification
â”‚   â”œâ”€â”€ views/                     # 5 archived view files
â”‚   â”œâ”€â”€ stores/                    # 1 archived store file
â”‚   â””â”€â”€ components/                # 2 archived components
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ reports/
â”‚   â”‚   â””â”€â”€ 250905_nav_simplification.md  # ğŸ†• Detailed implementation report
â””â”€â”€ dist/                          # Production build (updated structure)
```

### Current Code Quality Status
- âœ… **Build**: Successfully compiles to /dist
- âš ï¸ **TypeScript**: Minor type warnings (components use any type)
- âœ… **ESLint**: Major issues resolved through file archiving
- âœ… **Architecture**: Clean separation of concerns

### Next Phase Priorities
1. **TypeScript Type Safety**: Fix remaining any type usage
2. **Component Polish**: Add transition animations and improved UX
3. **Data Integration**: Replace mock data with real data sources
4. **Performance**: Implement lazy loading and caching strategies

### Data Sources
- Main config: docs/plans/web3scv8_v4.toml (4.0.0)
- Generated JSON files: vue/public/w3sc8_*.json
- Interview questions: vue/public/data/interview-*.json
- Archived references: Git tag `v4.0.0-before-nav-simplify`